<table>
<tr><th width="10">View</th><th>Name</th><th>Type</th><th>Description</th></tr>
<%  i = 0
    @properties.each do |property|
   
	pdata = Property.find_by_name( property.name )
	unless pdata
	    pdata = Property.create( :name => property.name )
	    pdata.save
	end

	propertyview = Propertyview.find( :first, :conditions => "host_id = #{@host.id} and cimclass_id = #{@klass.id} and property_id = #{pdata.id}" )

	i = i + 1
	if (i % 2) == 0
	    trclass = "even"
	else
	    trclass = "odd"
	end
	trclass += " propagated" if property.propagated?
	trclass += " key" if property.key?
-%>
<tr class="<%= trclass %>" -%>
   <td><%= check_box_tag "_prop_#{property.name}", pdata.id, propertyview -%></td>
   <td><%= property.name -%></td>
   <td><%= CIM::Type.name( property.type ) -%></td>
    <% shortdesc = property.display_name
       fulldesc = simple_format property.description
       shortdesc = fulldesc[0..100]+" ..." unless shortdesc
       shortid = "p_short_#{i}"
       fullid = "p_full_#{i}" -%>
    <td>
      <div id='<%= shortid -%>'><%= shortdesc -%></div>
      <div id='<%= fullid -%>' style="display:none; font:60% Arial; font-weight: lighter; line-height: 1em; background-color: #79B933;"><%= fulldesc -%></div>
    </td>
  </tr>
  <script type="text/javascript">
    var p_tooltip_<%= i -%> = new Tooltip('<%= shortid -%>','<%= fullid -%>')
  </script>
<% end %>
</table>
